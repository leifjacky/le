<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="Jacky Yip&apos;s Blog">
<meta property="og:type" content="website">
<meta property="og:title" content="Miraky">
<meta property="og:url" content="http://yecj.me/index.html">
<meta property="og:site_name" content="Miraky">
<meta property="og:description" content="Jacky Yip&apos;s Blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Miraky">
<meta name="twitter:description" content="Jacky Yip&apos;s Blog">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://yecj.me/"/>

  <title> Miraky </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Miraky</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="#" class="st-search-show-outputs">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <form class="site-search-form">
  <input type="text" id="st-search-input" class="st-search-input st-default-search-input" />
</form>

<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
    (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
    e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install', 'aHp7sjm9BxK2nt1DbxJg','2.0.0');
</script>



    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/24/hexo-Next主题设置多说-DISQUS/" itemprop="url">
                  hexo Next主题设置多说 DISQUS
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-07-24T10:00:50+08:00" content="2016-07-24">
              2016-07-24
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/07/24/hexo-Next主题设置多说-DISQUS/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/07/24/hexo-Next主题设置多说-DISQUS/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>转载自：<a href="https://github.com/iissnan/hexo-theme-next/wiki/设置多说-DISQUS" target="_blank" rel="external">https://github.com/iissnan/hexo-theme-next/wiki/设置多说-DISQUS</a></p>
</blockquote>
<p>添加 多说 或者 Disqus 第三方评论系统。当同时设置了 多说 和 Disqus 时，优先选择多说。</p>
<blockquote>
<p>NexT 主题为多说提供了一套自定义的样式。</p>
</blockquote>
<h2 id="使用多说"><a href="#使用多说" class="headerlink" title="使用多说"></a>使用<a href="http://duoshuo.com/" target="_blank" rel="external">多说</a></h2><ol>
<li><p>使用多说前需要先在 <a href="http://duoshuo.com/" target="_blank" rel="external">多说</a> 创建一个站点。具体步骤如下：</p>
<ol>
<li>登录后在首页选择 “我要安装”。</li>
<li>创建站点，填写站点相关信息。注意，<em>多说域名</em> 这一栏填写的即是你的 <code>duoshuo_shortname</code>。</li>
</ol>
</li>
<li>编辑站点的 <code>_config.yml</code> <em>注意，不是主题的<code>_config.yml</code>文件</em> ，添加 <code>duoshuo_shortname</code>字段，设置如下</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">duoshuo_shortname: your-duoshuo-shortname</div></pre></td></tr></table></figure>
<p>  （注）duoshuo short name: 你的多说二级域名去掉 .duoshuo.com 部分</p>
<hr>
<h2 id="使用Disqus"><a href="#使用Disqus" class="headerlink" title="使用Disqus"></a>使用<a href="https://disqus.com/" target="_blank" rel="external">Disqus</a></h2><p>编辑站点的 <code>_config.yml</code> ，添加 <code>disqus_shortname</code> 字段，设置如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">disqus_shortname: your-disqus-shortname</div></pre></td></tr></table></figure>
<p>如需取消某个页面的评论，在md文件的front-matter中增加</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">comments: false</div></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/24/SS自定义代理规则user-rule设置方法/" itemprop="url">
                  SS自定义代理规则user-rule设置方法
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-07-24T09:47:06+08:00" content="2016-07-24">
              2016-07-24
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/07/24/SS自定义代理规则user-rule设置方法/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/07/24/SS自定义代理规则user-rule设置方法/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>转载自：<a href="http://blog.e9china.net/tufan/shadowsockszidingyidailiguizeuser-ruleshezhifangfa.html" target="_blank" rel="external">http://blog.e9china.net/tufan/shadowsockszidingyidailiguizeuser-ruleshezhifangfa.html</a></p>
</blockquote>
<p>为了防止带有Shadowsocks文字的文章被和谐，所以以后标题都会以SS命名！</p>
<p>Sandy在XCODE中上传APP的APPLE市场的时候老是卡在UP那个环节，所以想通过SS去跑。结果成功了！</p>
<p>最新版本的shadowsocks支持用户自定义代理规则，更新到最新的版本的shadowsocks后， 在shadowsocks文件夹内会有一个user-rule.txt文档，如果用户需要添加自定义代理规则，只需要编辑user-rule.txt文件。</p>
<p>自定义代理规则的设置语法与GFWlist相同，即<a href="https://adblockplus.org/en/filter-cheatsheet" target="_blank" rel="external">adblockplus过滤规则</a>。简要描述如下：</p>
<blockquote>
<p>1. 通配符支持，如 *.example.com/* 实际书写时可省略* 如.example.com/ 意即*.example.com/*</p>
<p>2. 正则表达式支持，以\开始和结束， 如 \[\w]+:\/\/example.com\</p>
<p>3. 例外规则 @@，如 @@*.example.com/* 满足@@后规则的地址不使用代理</p>
<p>4. 匹配地址开始和结尾 |，如 |<a href="http://example.com、example.com|分别表示以http://example.com开始和以example.com结束的地址" target="_blank" rel="external">http://example.com、example.com|分别表示以http://example.com开始和以example.com结束的地址</a></p>
<p>5. || 标记，如 ||example.com 则<a href="http://example.com、https://example.com、ftp://example.com等地址均满足条件" target="_blank" rel="external">http://example.com、https://example.com、ftp://example.com等地址均满足条件</a></p>
<p>6. 注释 ! 如 ! Comment</p>
</blockquote>
<p>例如你要添加www.ip138.com、ip.cn两个网站到自定义代理规则，编辑user-rule.txt文件，在文件最后加入：</p>
<blockquote>
<p>!测试user-rule生效<br>||ip138.com<br>||ip.cn</p>
</blockquote>
<p>备注：user-rule.txt一行只能有一条代理规则。</p>
<p>user-rule.txt中的规则并不能直接被shadowsocks使用，如要添加到user-rule.txt中的规则生效，你还要执行下面重要的一步：更新本地的PAC，更新后user-rule.txt中的自定义规则会添加到PAC.txt文件内。（备注：每次编辑完user-rule.txt后，均需执行“从GFWList更新本地PAC”，使本次规则也生效。）</p>
<p><img src="http://www.duoluodeyu.com/wp-content/uploads/2015/05/LIST.jpg" alt="更新PAC" title="更新PAC"></p>
<p>此时你再打开<a href="http://www.ip138.com或者http://ip.cn时，都会通过shadowsocks访问。" target="_blank" rel="external">http://www.ip138.com或者http://ip.cn时，都会通过shadowsocks访问。</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/24/POJ-1287-Networking-最小生成树/" itemprop="url">
                  POJ 1287 Networking 最小生成树
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-07-24T00:54:07+08:00" content="2016-07-24">
              2016-07-24
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/07/24/POJ-1287-Networking-最小生成树/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/07/24/POJ-1287-Networking-最小生成树/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>Time Limit:1000MS     Memory Limit:10000KB     64bit IO Format:%lld &amp; %llu</p>
</blockquote>
<h1 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h1><p>You are assigned to design network connections between certain points in a wide area. You are given a set of points in the area, and a set of possible routes for the cables that may connect pairs of points. For each possible route between two points, you are given the length of the cable that is needed to connect the points over that route. Note that there may exist many possible routes between two given points. It is assumed that the given possible routes connect (directly or indirectly) each two points in the area.<br>Your task is to design the network for the area, so that there is a connection (direct or indirect) between every two points (i.e., all the points are interconnected, but not necessarily by a direct cable), and that the total length of the used cable is minimal.</p>
<h1 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h1><p>The input file consists of a number of data sets. Each data set defines one required network. The first line of the set contains two integers: the first defines the number P of the given points, and the second the number R of given routes between the points. The following R lines define the given routes between the points, each giving three integer numbers: the first two numbers identify the points, and the third gives the length of the route. The numbers are separated with white spaces. A data set giving only one number P=0 denotes the end of the input. The data sets are separated with an empty line.<br>The maximal number of points is 50. The maximal length of a given route is 100. The number of possible routes is unlimited. The nodes are identified with integers between 1 and P (inclusive). The routes between two points i and j may be given as i j or as j i. </p>
<h1 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h1><p>For each data set, print one number on a separate line that gives the total length of the cable used for the entire designed network.</p>
<h1 id="Sample"><a href="#Sample" class="headerlink" title="Sample"></a>Sample</h1><h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><pre><code>1 0

2 3
1 2 37
2 1 17
1 2 68

3 7
1 2 19
2 3 11
3 1 7
1 3 5
2 3 89
3 1 91
1 2 32

5 7
1 2 5
2 3 7
2 4 8
4 5 11
3 5 10
1 5 6
4 2 12

0
</code></pre><h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><pre><code>0
17
16
26
</code></pre><h1 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h1><p>模板题</p>
<h1 id="AC代码"><a href="#AC代码" class="headerlink" title="AC代码"></a>AC代码</h1><pre><code>#include &lt;iostream&gt;
#include &lt;cstdio&gt;
#include &lt;cstring&gt;
#include &lt;algorithm&gt;
#include &lt;vector&gt;
using namespace std;

#define N 55

struct Edge{
    int u,v,d;
    Edge(){}
    Edge(int uu,int vv,int dd):u(uu),v(vv),d(dd){}

    bool operator&lt;(const Edge &amp;a)const{
        return d&lt;a.d;
    }
};

vector&lt;Edge&gt; edges;
int n,m;
int f[N];

int _find(int x){
    if (f[x]==-1){
        return x;
    }else{
        return f[x]=_find(f[x]);
    }
}

int kruskal(){
    memset(f,-1,sizeof(f));
    sort(edges.begin(),edges.end());
    int ans=0;

    int cnt=n;
    for (int i=0;i&lt;edges.size();i++){
        int u=edges[i].u;
        int v=edges[i].v;
        int d=edges[i].d;
        int x=_find(u);
        int y=_find(v);
        if (x!=y){
            f[x]=y;
            ans+=d;
            cnt--;
            if (cnt==1)
                return ans;
        }
    }
    return 0;
}

int main(){
    while (scanf(&quot;%d&quot;,&amp;n)!=EOF){
        if (n==0)
            break;
        scanf(&quot;%d&quot;,&amp;m);
        edges.clear();
        for (int i=0;i&lt;m;i++){
            int u,v,d;
            scanf(&quot;%d%d%d&quot;,&amp;u,&amp;v,&amp;d);
            edges.push_back(Edge(u,v,d));
        }
        printf(&quot;%d\n&quot;,kruskal());
    }

    return 0;
}
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/24/POJ-1251-Jungle-Roads-最小生成树/" itemprop="url">
                  POJ 1251 Jungle Roads 最小生成树
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-07-24T00:45:01+08:00" content="2016-07-24">
              2016-07-24
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/07/24/POJ-1251-Jungle-Roads-最小生成树/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/07/24/POJ-1251-Jungle-Roads-最小生成树/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>Time Limit:1000MS     Memory Limit:10000KB     64bit IO Format:%lld &amp; %llu</p>
</blockquote>
<h1 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h1><p><img src="http://poj.org/images/1251_1.jpg" alt="image"><br>The Head Elder of the tropical island of Lagrishan has a problem. A burst of foreign aid money was spent on extra roads between villages some years ago. But the jungle overtakes roads relentlessly, so the large road network is too expensive to maintain. The Council of Elders must choose to stop maintaining some roads. The map above on the left shows all the roads in use now and the cost in aacms per month to maintain them. Of course there needs to be some way to get between all the villages on maintained roads, even if the route is not as short as before. The Chief Elder would like to tell the Council of Elders what would be the smallest amount they could spend in aacms per month to maintain roads that would connect all the villages. The villages are labeled A through I in the maps above. The map on the right shows the roads that could be maintained most cheaply, for 216 aacms per month. Your task is to write a program that will solve such problems. </p>
<h1 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h1><p>The input consists of one to 100 data sets, followed by a final line containing only 0. Each data set starts with a line containing only a number n, which is the number of villages, 1 &lt; n &lt; 27, and the villages are labeled with the first n letters of the alphabet, capitalized. Each data set is completed with n-1 lines that start with village labels in alphabetical order. There is no line for the last village. Each line for a village starts with the village label followed by a number, k, of roads from this village to villages with labels later in the alphabet. If k is greater than 0, the line continues with data for each of the k roads. The data for each road is the village label for the other end of the road followed by the monthly maintenance cost in aacms for the road. Maintenance costs will be positive integers less than 100. All data fields in the row are separated by single blanks. The road network will always allow travel between all the villages. The network will never have more than 75 roads. No village will have more than 15 roads going to other villages (before or after in the alphabet). In the sample input below, the first data set goes with the map above. </p>
<h1 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h1><p>The output is one integer per line for each data set: the minimum cost in aacms per month to maintain a road system that connect all the villages. Caution: A brute force solution that examines every possible set of roads will not finish within the one minute time limit. </p>
<h1 id="Sample"><a href="#Sample" class="headerlink" title="Sample"></a>Sample</h1><h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><pre><code>9
A 2 B 12 I 25
B 3 C 10 H 40 I 8
C 2 D 18 G 55
D 1 E 44
E 2 F 60 G 38
F 0
G 1 H 35
H 1 I 35
3
A 2 B 10 C 40
B 1 C 20
0
</code></pre><h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><pre><code>216
30
</code></pre><h1 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h1><p>模板题</p>
<h1 id="AC代码"><a href="#AC代码" class="headerlink" title="AC代码"></a>AC代码</h1><pre><code>#include &lt;iostream&gt;
#include &lt;cstdio&gt;
#include &lt;vector&gt;
#include &lt;algorithm&gt;
#include &lt;cstring&gt;
using namespace std;

#define N 30
#define PB push_back

struct Edge{
    int u,v,d;
    Edge(){}
    Edge(int uu,int vv,int dd):u(uu),v(vv),d(dd){}

    bool operator&lt;(const Edge &amp;a)const{
        return d&lt;a.d;
    }
};

vector&lt;Edge&gt; edges;
char stu[10],stv[10];
int n,m;
int f[N];

int _find(int x){
    if (f[x]==-1){
        return x;
    }else{
        return f[x]=_find(f[x]);
    }
}

int main(){
    while (scanf(&quot;%d&quot;,&amp;n)!=EOF){
        if (n==0)
            break;
        edges.clear();
        memset(f,-1,sizeof(f));

        for (int i=1;i&lt;n;i++){
            int u,v,d;
            scanf(&quot;%s%d&quot;,stu,&amp;m);
            u=stu[0]-&apos;A&apos;;
            for (int j=0;j&lt;m;j++){
                scanf(&quot;%s%d&quot;,stv,&amp;d);
                v=stv[0]-&apos;A&apos;;
                edges.PB(Edge(u,v,d));
            }
        }

        sort(edges.begin(),edges.end());

        int cnt=n;
        int ans=0;
        for (int i=0;i&lt;edges.size();i++){
            int u,v,d;
            u=edges[i].u;
            v=edges[i].v;
            d=edges[i].d;

            int x=_find(u);
            int y=_find(v);
            if (x!=y){
                f[x]=y;
                ans+=d;
                cnt--;
                if (cnt==1)
                    break;
            }
        }
            printf(&quot;%d\n&quot;,ans);
    }

    return 0;
}
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/23/POJ-1308-Is-It-A-Tree-并查集/" itemprop="url">
                  POJ 1308 Is It A Tree? 并查集
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-07-23T23:42:48+08:00" content="2016-07-23">
              2016-07-23
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/07/23/POJ-1308-Is-It-A-Tree-并查集/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/07/23/POJ-1308-Is-It-A-Tree-并查集/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>Time Limit:1000MS     Memory Limit:10000KB     64bit IO Format:%lld &amp; %llu</p>
</blockquote>
<h1 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h1><p>A tree is a well-known data structure that is either empty (null, void, nothing) or is a set of one or more nodes connected by directed edges between nodes satisfying the following properties. </p>
<p>There is exactly one node, called the root, to which no directed edges point.<br>Every node except the root has exactly one edge pointing to it.<br>There is a unique sequence of directed edges from the root to each node.<br>For example, consider the illustrations below, in which nodes are represented by circles and edges are represented by lines with arrowheads. The first two of these are trees, but the last is not. </p>
<p>In this problem you will be given several descriptions of collections of nodes connected by directed edges. For each of these you are to determine if the collection satisfies the definition of a tree or not.</p>
<h1 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h1><p>The input will consist of a sequence of descriptions (test cases) followed by a pair of negative integers. Each test case will consist of a sequence of edge descriptions followed by a pair of zeroes Each edge description will consist of a pair of integers; the first integer identifies the node from which the edge begins, and the second integer identifies the node to which the edge is directed. Node numbers will always be greater than zero.</p>
<h1 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h1><p>For each test case display the line “Case k is a tree.” or the line “Case k is not a tree.”, where k corresponds to the test case number (they are sequentially numbered starting with 1).</p>
<h1 id="Sample"><a href="#Sample" class="headerlink" title="Sample"></a>Sample</h1><h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><pre><code>6 8  5 3  5 2  6 4
5 6  0 0

8 1  7 3  6 2  8 9  7 5
7 4  7 8  7 6  0 0

3 8  6 8  6 4
5 3  5 6  5 2  0 0
-1 -1
</code></pre><h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><pre><code>Case 1 is a tree.
Case 2 is a tree.
Case 3 is not a tree.
</code></pre><h1 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h1><p>跟HDU 1272 小希的迷宫类似，只不过这次变成了有向图。可是数据太弱。3 8 6 8 0 0这种本来不为树，但是一开始交的代码没有判断居然也能过。判断是否为树的方法其实还要加上，树上每点的入度不能大于1.</p>
<h1 id="AC代码"><a href="#AC代码" class="headerlink" title="AC代码"></a>AC代码</h1><pre><code>#include &lt;iostream&gt;
#include &lt;cstdio&gt;
#include &lt;cstring&gt;
using namespace std;

#define N 100005

int u,v;
int f[N],vis[N],cnt,in[N];
bool flag;

int _find(int x){
    if (f[x]==-1){
        return x;
    }else{
        return f[x]=_find(f[x]);
    }
}

bool _union(int u,int v){
    int x=_find(u);
    int y=_find(v);

    if (x==y){
        return false;
    }else{
        f[y]=x;
        return true;
    }
}

int main(){
    int kase=0;
    memset(in,0,sizeof(in));
    memset(f,-1,sizeof(f));
    memset(vis,0,sizeof(vis));
    cnt=0;
    flag=true;
    while (scanf(&quot;%d%d&quot;,&amp;u,&amp;v)){
        if (u&lt;=-1 &amp;&amp; v&lt;=-1){
            break;
        }else if (u==0 &amp;&amp; v==0){
            for (int i=0;i&lt;N;i++){
                if (vis[i] &amp;&amp; _find(i)==i)
                    cnt++;
            }

            if (flag &amp;&amp; cnt&lt;=1){
                printf(&quot;Case %d is a tree.\n&quot;,++kase);
            }else{
                printf(&quot;Case %d is not a tree.\n&quot;,++kase);
            }
            memset(f,-1,sizeof(f));
            memset(vis,0,sizeof(vis));
            memset(in,0,sizeof(in));
            cnt=0;
            flag=true;
        }else{
            if (vis[u]==0){
                vis[u]=1;
            }
            if (vis[v]==0){
                vis[v]=1;
            }
            in[v]++;
            if (in[v]&gt;1)
                flag=false;

            if (flag){
                flag=_union(u,v);
            }
        }
    }

    return 0;
}
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/23/HDU-1272-小希的迷宫-并查集/" itemprop="url">
                  HDU 1272 小希的迷宫 并查集
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-07-23T23:38:01+08:00" content="2016-07-23">
              2016-07-23
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/07/23/HDU-1272-小希的迷宫-并查集/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/07/23/HDU-1272-小希的迷宫-并查集/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>Time Limit:1000MS     Memory Limit:32768KB     64bit IO Format:%I64d &amp; %I64u</p>
</blockquote>
<h1 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h1><p>上次Gardon的迷宫城堡小希玩了很久（见Problem B），现在她也想设计一个迷宫让Gardon来走。但是她设计迷宫的思路不一样，首先她认为所有的通道都应该是双向连通的，就是说如果有一个通道连通了房间A和B，那么既可以通过它从房间A走到房间B，也可以通过它从房间B走到房间A，为了提高难度，小希希望任意两个房间有且仅有一条路径可以相通（除非走了回头路）。小希现在把她的设计图给你，让你帮忙判断她的设计图是否符合她的设计思路。比如下面的例子，前两个是符合条件的，但是最后一个却有两种方法从5到达8。 </p>
<h1 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h1><p>输入包含多组数据，每组数据是一个以0 0结尾的整数对列表，表示了一条通道连接的两个房间的编号。房间的编号至少为1，且不超过100000。每两组数据之间有一个空行。<br>整个文件以两个-1结尾。 </p>
<h1 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h1><p>对于输入的每一组数据，输出仅包括一行。如果该迷宫符合小希的思路，那么输出”Yes”，否则输出”No”。 </p>
<h1 id="Sample"><a href="#Sample" class="headerlink" title="Sample"></a>Sample</h1><h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><pre><code>6 8  5 3  5 2  6 4
5 6  0 0

8 1  7 3  6 2  8 9  7 5
7 4  7 8  7 6  0 0

3 8  6 8  6 4
5 3  5 6  5 2  0 0

-1 -1 
</code></pre><h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><pre><code>Yes
Yes
No 
</code></pre><h1 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h1><p>模板题，注意最后判断是否只有一个连通分量。另外，最后生成的数顶点个数可以为0。就在这里卡了很久。</p>
<h1 id="AC代码"><a href="#AC代码" class="headerlink" title="AC代码"></a>AC代码</h1><pre><code>#include &lt;iostream&gt;
#include &lt;cstdio&gt;
#include &lt;cstring&gt;
using namespace std;

#define N 100005

int u,v;
int f[N],vis[N],cnt;
bool flag;

int _find(int x){
    if (f[x]==-1){
        return x;
    }else{
        return f[x]=_find(f[x]);
    }
}

bool _union(int u,int v){
    int x=_find(u);
    int y=_find(v);

    if (x==y){
        return false;
    }else{
        f[x]=y;
        cnt--;
        return true;
    }
}

int main(){
    memset(f,-1,sizeof(f));
    memset(vis,0,sizeof(vis));
    cnt=0;
    flag=true;
    while (scanf(&quot;%d%d&quot;,&amp;u,&amp;v)){
        if (u==-1 &amp;&amp; v==-1){
            break;
        }else if (u==0 &amp;&amp; v==0){
            if (flag &amp;&amp; cnt&lt;=1){
                printf(&quot;Yes\n&quot;);
            }else{
                printf(&quot;No\n&quot;);
            }
            memset(f,-1,sizeof(f));
            memset(vis,0,sizeof(vis));
            cnt=0;
            flag=true;
        }else{
            if (vis[u]==0){
                vis[u]=1;
                cnt++;
            }
            if (vis[v]==0){
                vis[v]=1;
                cnt++;
            }

            if (flag){
                flag=_union(u,v);
            }
        }
    }

    return 0;
}
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/23/ZOJ-3761-Connections-in-Galaxy-War-并查集/" itemprop="url">
                  ZOJ 3761 Connections in Galaxy War 并查集
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-07-23T23:34:18+08:00" content="2016-07-23">
              2016-07-23
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/07/23/ZOJ-3761-Connections-in-Galaxy-War-并查集/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/07/23/ZOJ-3761-Connections-in-Galaxy-War-并查集/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h1><p>In order to strengthen the defense ability, many stars in galaxy allied together and built many bidirectional tunnels to exchange messages. However, when the Galaxy War began, some tunnels were destroyed by the monsters from another dimension. Then many problems were raised when some of the stars wanted to seek help from the others.</p>
<p>In the galaxy, the stars are numbered from 0 to N-1 and their power was marked by a non-negative integer pi. When the star A wanted to seek help, it would send the message to the star with the largest power which was connected with star A directly or indirectly. In addition, this star should be more powerful than the star A. If there were more than one star which had the same largest power, then the one with the smallest serial number was chosen. And therefore, sometimes star A couldn’t find such star for help.</p>
<p>Given the information of the war and the queries about some particular stars, for each query, please find out whether this star could seek another star for help and which star should be chosen.</p>
<h1 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h1><p>There are no more than 20 cases. Process to the end of file.</p>
<p>For each cases, the first line contains an integer N (1 &lt;= N &lt;= 10000), which is the number of stars. The second line contains N integers p0, p1, … , pn-1 (0 &lt;= pi &lt;= 1000000000), representing the power of the i-th star. Then the third line is a single integer M (0 &lt;= M &lt;= 20000), that is the number of tunnels built before the war. Then M lines follows. Each line has two integers a, b (0 &lt;= a, b &lt;= N - 1, a != b), which means star a and star b has a connection tunnel. It’s guaranteed that each connection will only be described once.</p>
<p>In the (M + 2)-th line is an integer Q (0 &lt;= Q &lt;= 50000) which is the number of the information and queries. In the following Q lines, each line will be written in one of next two formats.</p>
<ul>
<li><p>“destroy a b” - the connection between star a and star b was destroyed by the monsters. It’s guaranteed that the connection between star a and star b was available before the monsters’ attack.</p>
</li>
<li><p>“query a” - star a wanted to know which star it should turn to for help</p>
</li>
</ul>
<p>There is a blank line between consecutive cases.</p>
<h1 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h1><p>For each query in the input, if there is no star that star a can turn to for help, then output “-1”; otherwise, output the serial number of the chosen star.</p>
<p>Print a blank line between consecutive cases.</p>
<h1 id="Sample"><a href="#Sample" class="headerlink" title="Sample"></a>Sample</h1><h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><pre><code>2
10 20
1
0 1
5
query 0
query 1
destroy 0 1
query 0
query 1
</code></pre><h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><pre><code>1
-1
-1
-1
</code></pre><h1 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h1><p>因为操作中只包含删除和询问，所以可以先将指令存起来，建立除destroy操作以外的并查集，接着逆向进行操作，得出每次操作的答案，最后再按顺序输出。</p>
<h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><blockquote>
<p>由于ZOJ这几天崩了，所以不能测试代码是否能AC<br>这里就不贴了</p>
</blockquote>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/23/POJ-2912-Rochambeau-并查集/" itemprop="url">
                  POJ 2912 Rochambeau 并查集
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-07-23T23:25:03+08:00" content="2016-07-23">
              2016-07-23
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/07/23/POJ-2912-Rochambeau-并查集/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/07/23/POJ-2912-Rochambeau-并查集/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>Time Limit:5000MS     Memory Limit:65536KB     64bit IO Format:%lld &amp; %llu</p>
</blockquote>
<h1 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h1><p>N children are playing Rochambeau (scissors-rock-cloth) game with you. One of them is the judge. The rest children are divided into three groups (it is possible that some group is empty). You don’t know who is the judge, or how the children are grouped. Then the children start playing Rochambeau game for M rounds. Each round two children are arbitrarily selected to play Rochambeau for one once, and you will be told the outcome while not knowing which gesture the children presented. It is known that the children in the same group would present the same gesture (hence, two children in the same group always get draw when playing) and different groups for different gestures. The judge would present gesture randomly each time, hence no one knows what gesture the judge would present. Can you guess who is the judge after after the game ends? If you can, after how many rounds can you find out the judge at the earliest?</p>
<h1 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h1><p>Input contains multiple test cases. Each test case starts with two integers N and M (1 ≤ N ≤ 500, 0 ≤ M ≤ 2,000) in one line, which are the number of children and the number of rounds. Following are M lines, each line contains two integers in [0, N) separated by one symbol. The two integers are the IDs of the two children selected to play Rochambeau for this round. The symbol may be “=”, “&gt;” or “&lt;”, referring to a draw, that first child wins and that second child wins respectively.</p>
<h1 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h1><p>There is only one line for each test case. If the judge can be found, print the ID of the judge, and the least number of rounds after which the judge can be uniquely determined. If the judge can not be found, or the outcomes of the M rounds of game are inconsistent, print the corresponding message.</p>
<h1 id="Sample"><a href="#Sample" class="headerlink" title="Sample"></a>Sample</h1><h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><pre><code>3 3
0&lt;1
1&lt;2
2&lt;0
3 5
0&lt;1
0&gt;1
1&lt;2
1&gt;2
0&lt;2
4 4
0&lt;1
0&gt;1
2&lt;3
2&gt;3
1 0
</code></pre><h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><pre><code>Can not determine
Player 1 can be determined to be the judge after 4 lines
Impossible
Player 0 can be determined to be the judge after 0 lines
</code></pre><h1 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h1><p>题目意思是一共n个人，分成3组，每组分别只出剪刀石头布。n个人中只有1个裁判，但是裁判可以任意出剪刀石头布。现在给m条提示，每条表示两个人之间的输赢情况。问是否能确定裁判是谁。</p>
<p>因为数据并不大，可以枚举n个人，每次假设i为裁判，则所有包含i的信息直接忽略，其他的信息使用种类并查集分类看是否有冲突，如果有冲突则记录从哪里开始冲突。</p>
<h1 id="AC代码"><a href="#AC代码" class="headerlink" title="AC代码"></a>AC代码</h1><pre><code>#include &lt;iostream&gt;
#include &lt;cstdio&gt;
#include &lt;cstring&gt;
using namespace std;

#define N 505
#define M 2005

struct node{
    int u,v,d;
    node(){}
    node(int uu,int vv,int dd):u(uu),v(vv),d(dd){}
}a[M];

int n,m;
int f[N],r[N];

int _find(int x){
    if (f[x]==-1){
        return x;
    }else{
        int fx=f[x];
        f[x]=_find(f[x]);
        r[x]=(r[x]+r[fx])%3;
        return f[x];
    }
}

bool _union(int u,int v,int d){
    int x=_find(u);
    int y=_find(v);

    if (x==y){
        if (((r[u]-r[v]+3)%3)==d){
            return true;
        }else{
            return false;
        }
    }else{
        f[x]=y;
        r[x]=(-r[u]+r[v]+d+3)%3;
        return true;
    }
}

int main(){
    while (scanf(&quot;%d%d&quot;,&amp;n,&amp;m)!=EOF){
        int u,v,d;
        char c;
        for (int i=0;i&lt;m;i++){
            scanf(&quot;%d%c%d&quot;,&amp;u,&amp;c,&amp;v);
            if (c==&apos;&lt;&apos;){
                d=2;
            }else if (c==&apos;=&apos;){
                d=0;
            }else{
                d=1;
            }
            a[i]=node(u,v,d);
        }

        bool flag;
        int cnt=0;
        int mx=0;
        int num=0;
        for (int i=0;i&lt;n;i++){
            flag=true;
            memset(f,-1,sizeof(f));
            memset(r,0,sizeof(r));
            for (int j=0;j&lt;m;j++){
                u=a[j].u;
                v=a[j].v;
                d=a[j].d;

                if (u==i || v==i)
                    continue;

                flag=_union(u,v,d);
                if (flag==false){
                    mx=max(mx,j+1);
                    break;
                }
            }
            if (flag){
                cnt++;
                num=i;
            }
        }

        if (cnt&gt;1){
            printf(&quot;Can not determine\n&quot;);
        }else if (cnt==0){
            printf(&quot;Impossible\n&quot;);
        }else{
            printf(&quot;Player %d can be determined to be the judge after %d lines\n&quot;,num,mx);
        }
    }

    return 0;
}
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/23/POJ-1984-Navigation-Nightmare-并查集/" itemprop="url">
                  POJ 1984 Navigation Nightmare 并查集
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-07-23T23:08:29+08:00" content="2016-07-23">
              2016-07-23
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/07/23/POJ-1984-Navigation-Nightmare-并查集/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/07/23/POJ-1984-Navigation-Nightmare-并查集/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>Time Limit:2000MS     Memory Limit:30000KB     64bit IO Format:%lld &amp; %llu</p>
</blockquote>
<h1 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h1><p>Farmer John’s pastoral neighborhood has N farms (2 &lt;= N &lt;= 40,000), usually numbered/labeled 1..N. A series of M (1 &lt;= M &lt; 40,000) vertical and horizontal roads each of varying lengths (1 &lt;= length &lt;= 1000) connect the farms. A map of these farms might look something like the illustration below in which farms are labeled F1..F7 for clarity and lengths between connected farms are shown as (n):</p>
<pre><code> F1 --- (13) ---- F6 --- (9) ----- F3

 |                                 |

(3)                                |

 |                                (7)

F4 --- (20) -------- F2            |

 |                                 |

(2)                               F5

 | 

F7 
</code></pre><p>Being an ASCII diagram, it is not precisely to scale, of course.</p>
<p>Each farm can connect directly to at most four other farms via roads that lead exactly north, south, east, and/or west. Moreover, farms are only located at the endpoints of roads, and some farm can be found at every endpoint of every road. No two roads cross, and precisely one path (sequence of roads) links every pair of farms.</p>
<p>FJ lost his paper copy of the farm map and he wants to reconstruct it from backup information on his computer. This data contains lines like the following, one for every road:</p>
<p>There is a road of length 10 running north from Farm #23 to Farm #17<br>There is a road of length 7 running east from Farm #1 to Farm #17<br>…</p>
<p>As FJ is retrieving this data, he is occasionally interrupted by questions such as the following that he receives from his navigationally-challenged neighbor, farmer Bob:</p>
<p>What is the Manhattan distance between farms #1 and #23?</p>
<p>FJ answers Bob, when he can (sometimes he doesn’t yet have enough data yet). In the example above, the answer would be 17, since Bob wants to know the “Manhattan” distance between the pair of farms.<br>The Manhattan distance between two points (x1,y1) and (x2,y2) is just |x1-x2| + |y1-y2| (which is the distance a taxicab in a large city must travel over city streets in a perfect grid to connect two x,y points).</p>
<p>When Bob asks about a particular pair of farms, FJ might not yet have enough information to deduce the distance between them; in this case, FJ apologizes profusely and replies with “-1”.</p>
<h1 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h1><ul>
<li>Line 1: Two space-separated integers: N and M</li>
<li>Lines 2..M+1: Each line contains four space-separated entities, F1, F2, L, and D that describe a road. F1 and F2 are numbers of two farms connected by a road, L is its length, and D is a character that is either ‘N’, ‘E’, ‘S’, or ‘W’ giving the direction of the road from F1 to F2.</li>
<li>Line M+2: A single integer, K (1 &lt;= K &lt;= 10,000), the number of FB’s queries</li>
<li>Lines M+3..M+K+2: Each line corresponds to a query from Farmer Bob and contains three space-separated integers: F1, F2, and I. F1 and F2 are numbers of the two farms in the query and I is the index (1 &lt;= I &lt;= M) in the data after which Bob asks the query. Data index 1 is on line 2 of the input data, and so on.</li>
</ul>
<h1 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h1><ul>
<li>Lines 1..K: One integer per line, the response to each of Bob’s queries.  Each line should contain either a distance measurement or -1, if it is impossible to determine the appropriate distance.</li>
</ul>
<h1 id="Sample"><a href="#Sample" class="headerlink" title="Sample"></a>Sample</h1><h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><pre><code>7 6
1 6 13 E
6 3 9 E
3 5 7 S
4 1 3 N
2 4 20 W
4 7 2 S
3
1 6 1
1 4 3
2 6 6
</code></pre><h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><pre><code>13
-1
10
</code></pre><h1 id="Hint"><a href="#Hint" class="headerlink" title="Hint"></a>Hint</h1><p>At time 1, FJ knows the distance between 1 and 6 is 13.<br>At time 3, the distance between 1 and 4 is still unknown.<br>At the end, location 6 is 3 units west and 7 north of 2, so the distance is 10.</p>
<h1 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h1><p>并查集，将每个地点的坐标代替普通的并查集中的点，r[x]表示点x与点f[x]的相对位置，那么只要两个地点属于同一集合，就可以通过r[x]算出他们之间的相对关系。</p>
<h1 id="AC代码"><a href="#AC代码" class="headerlink" title="AC代码"></a>AC代码</h1><pre><code>#include &lt;map&gt;
#include &lt;cstring&gt;
#include &lt;iostream&gt;
#include &lt;cstdio&gt;
#include &lt;algorithm&gt;
#include &lt;vector&gt;
using namespace std;

#define N 40005
#define K 10005
#define PB push_back

char dir[]=&quot;NESW&quot;;
int vx[]={-1,0,1,0};
int vy[]={0,1,0,-1};

struct order{
    int u,v,l,d;
}a[N];

struct query{
    int u,v,q,id,ans;
}b[K];

struct node{
    int x,y;
    node(){}
    node(int xx,int yy):x(xx),y(yy){}
}r[N];

int n,m,k;
int f[N];

bool cmp(query a,query b){
    return a.q&lt;b.q;
}

bool cmp2(query a,query b){
    return a.id&lt;b.id;
}

int _find(int x){
    if (f[x]==-1){
        return x;
    }else{
        int fx=f[x];
        f[x]=_find(f[x]);
        r[x].x+=r[fx].x;
        r[x].y+=r[fx].y;
    }
    return f[x];
}

void _union(int i){
    int u,v,l,d;
    u=a[i].u;
    v=a[i].v;
    l=a[i].l;
    d=a[i].d;

    int x=_find(u);
    int y=_find(v);
    int tx=l*vx[d];
    int ty=l*vy[d];

    if (x!=y){
        f[x]=y;
        r[x].x=tx+r[v].x-r[u].x;
        r[x].y=ty+r[v].y-r[u].y;
    }
}

int main(){
    while (scanf(&quot;%d%d&quot;,&amp;n,&amp;m)!=EOF){
        memset(f,-1,sizeof(f));
        for (int i=0;i&lt;=n;i++){
            r[i].x=r[i].y=0;
        }
        for (int i=0;i&lt;m;i++){
            char c;
            scanf(&quot;%d%d%d %c&quot;,&amp;a[i].u,&amp;a[i].v,&amp;a[i].l,&amp;c);
            for (int j=0;j&lt;4;j++){
                if (c==dir[j]){
                    a[i].d=j;
                    break;
                }
            }
        }

        scanf(&quot;%d&quot;,&amp;k);
        for (int i=0;i&lt;k;i++){
            scanf(&quot;%d%d%d&quot;,&amp;b[i].u,&amp;b[i].v,&amp;b[i].q);
            b[i].id=i;
        }

        sort(b,b+k,cmp);

        int cnt=0;
        for (int i=0;i&lt;k;i++){
            for (int j=cnt;j&lt;b[i].q;j++){
                _union(j);
            }
            cnt=b[i].q;

            int u=b[i].u;
            int v=b[i].v;
            int x=_find(u);
            int y=_find(v);
            if (x!=y){
                b[i].ans=-1;
            }else{
                b[i].ans=abs(r[u].x-r[v].x)+abs(r[u].y-r[v].y);
            }
        }

        sort(b,b+k,cmp2);

        for (int i=0;i&lt;k;i++){
            printf(&quot;%d\n&quot;,b[i].ans);
        }
    }

    return 0;
}
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/22/POJ-2492-A-Bug-s-Life-并查集/" itemprop="url">
                  POJ 2492 A Bug's Life 并查集
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-07-22T10:40:57+08:00" content="2016-07-22">
              2016-07-22
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/07/22/POJ-2492-A-Bug-s-Life-并查集/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/07/22/POJ-2492-A-Bug-s-Life-并查集/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>Time Limit:10000MS     Memory Limit:65536KB     64bit IO Format:%lld &amp; %llu</p>
</blockquote>
<h1 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h1><h2 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h2><p>Professor Hopper is researching the sexual behavior of a rare species of bugs. He assumes that they feature two different genders and that they only interact with bugs of the opposite gender. In his experiment, individual bugs and their interactions were easy to identify, because numbers were printed on their backs. </p>
<h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>Given a list of bug interactions, decide whether the experiment supports his assumption of two genders with no homosexual bugs or if it contains some bug interactions that falsify it.</p>
<h1 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h1><p>The first line of the input contains the number of scenarios. Each scenario starts with one line giving the number of bugs (at least one, and up to 2000) and the number of interactions (up to 1000000) separated by a single space. In the following lines, each interaction is given in the form of two distinct bug numbers separated by a single space. Bugs are numbered consecutively starting from one.</p>
<h1 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h1><p>The output for every scenario is a line containing “Scenario #i:”, where i is the number of the scenario starting at 1, followed by one line saying either “No suspicious bugs found!” if the experiment is consistent with his assumption about the bugs’ sexual behavior, or “Suspicious bugs found!” if Professor Hopper’s assumption is definitely wrong.</p>
<h1 id="Sample"><a href="#Sample" class="headerlink" title="Sample"></a>Sample</h1><h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><pre><code>2
3 3
1 2
2 3
1 3
4 2
1 2
3 4
</code></pre><h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><pre><code>Scenario #1:
Suspicious bugs found!

Scenario #2:
No suspicious bugs found!
</code></pre><h1 id="Hint"><a href="#Hint" class="headerlink" title="Hint"></a>Hint</h1><p>Huge input,scanf is recommended.</p>
<h1 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h1><p>并查集数组f[x]判断bug是否是同在同一集合，r[x]表示x与f[x]的关系，那么x,y在同一集合的情况下x,y之间的关系可以用r[x]^r[y]表示。</p>
<h1 id="AC代码"><a href="#AC代码" class="headerlink" title="AC代码"></a>AC代码</h1><pre><code>#include &lt;iostream&gt;
#include &lt;cstdio&gt;
#include &lt;cstring&gt;
using namespace std;

#define N 2005
#define PB push_back

int n,m;
int f[N],r[N];

int _find(int x){
    if (f[x]==-1){
        return x;
    }else{
        int fx=f[x];
        f[x]=_find(f[x]);
        r[x]=r[x]^r[fx];
    }
    return f[x];
}

bool _union(int u,int v){
    int x=_find(u);
    int y=_find(v);

    if (x==y){
        if ((r[u]^r[v])==1)
            return false;
        else
            return true;
    }else{
        f[x]=y;
        r[x]=r[u]^r[v]^1;
        return false;
    }
}

int main(){
    int T,kase=0;
    scanf(&quot;%d&quot;,&amp;T);
    while (T--){
        bool flag=false;
        memset(f,-1,sizeof(f));
        memset(r,0,sizeof(r));
        scanf(&quot;%d%d&quot;,&amp;n,&amp;m);
        for (int i=0;i&lt;m;i++){
            int u,v;
            scanf(&quot;%d%d&quot;,&amp;u,&amp;v);
            if (!flag){
                flag=_union(u,v);
            }
        }
        printf(&quot;Scenario #%d:\n&quot;,++kase);
        if (flag){
            printf(&quot;Suspicious bugs found!\n\n&quot;);
        }else{
            printf(&quot;No suspicious bugs found!\n\n&quot;);
        }
    }

    return 0;
}
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.jpg"
               alt="Jacky Yip" />
          <p class="site-author-name" itemprop="name">Jacky Yip</p>
          <p class="site-description motion-element" itemprop="description">Jacky Yip's Blog</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">24</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">17</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jacky Yip</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"leifjacky"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
  






  
  
  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
       search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body").append('<div class="popoverlay">').css('overflow', 'hidden');
      $('.popup').toggle();

    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
    'use strict';
    $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
            // get the contents from search data
            isfetched = true;
            $('.popup').detach().appendTo('.header-inner');
            var datas = $( "entry", xmlResponse ).map(function() {
                return {
                    title: $( "title", this ).text(),
                    content: $("content",this).text(),
                    url: $( "url" , this).text()
                };
            }).get();
            var $input = document.getElementById(search_id);
            var $resultContent = document.getElementById(content_id);
            $input.addEventListener('input', function(){
                var matchcounts = 0;
                var str='<ul class=\"search-result-list\">';                
                var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                $resultContent.innerHTML = "";
                if (this.value.trim().length > 1) {
                // perform local searching
                datas.forEach(function(data) {
                    var isMatch = true;
                    var content_index = [];
                    var data_title = data.title.trim().toLowerCase();
                    var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                    var data_url = data.url;
                    var index_title = -1;
                    var index_content = -1;
                    var first_occur = -1;
                    // only match artiles with not empty titles and contents
                    if(data_title != '' && data_content != '') {
                        keywords.forEach(function(keyword, i) {
                            index_title = data_title.indexOf(keyword);
                            index_content = data_content.indexOf(keyword);
                            if( index_title < 0 && index_content < 0 ){
                                isMatch = false;
                            } else {
                                if (index_content < 0) {
                                    index_content = 0;
                                }
                                if (i == 0) {
                                    first_occur = index_content;
                                }
                            }
                        });
                    }
                    // show search results
                    if (isMatch) {
                        matchcounts += 1;
                        str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                        var content = data.content.trim().replace(/<[^>]+>/g,"");
                        if (first_occur >= 0) {
                            // cut out 100 characters
                            var start = first_occur - 20;
                            var end = first_occur + 80;
                            if(start < 0){
                                start = 0;
                            }
                            if(start == 0){
                                end = 50;
                            }
                            if(end > content.length){
                                end = content.length;
                            }
                            var match_content = content.substring(start, end);
                            // highlight all keywords
                            keywords.forEach(function(keyword){
                                var regS = new RegExp(keyword, "gi");
                                match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                            });
                            
                            str += "<p class=\"search-result\">" + match_content +"...</p>"
                        }
                        str += "</li>";
                    }
                })};
                str += "</ul>";
                if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
                if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
                $resultContent.innerHTML = str;
            });
            proceedsearch();
        }
    });}

    // handle and trigger popup window;
    $('.popup-trigger').mousedown(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };

    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".popoverlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>

  

  

  

</body>
</html>
