<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="Jacky Yip&apos;s Blog">
<meta property="og:type" content="website">
<meta property="og:title" content="Miraky">
<meta property="og:url" content="http://yecj.me/index.html">
<meta property="og:site_name" content="Miraky">
<meta property="og:description" content="Jacky Yip&apos;s Blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Miraky">
<meta name="twitter:description" content="Jacky Yip&apos;s Blog">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://yecj.me/"/>

  <title> Miraky </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Miraky</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="#" class="st-search-show-outputs">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <form class="site-search-form">
  <input type="text" id="st-search-input" class="st-search-input st-default-search-input" />
</form>

<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
    (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
    e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install', 'aHp7sjm9BxK2nt1DbxJg','2.0.0');
</script>



    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/23/POJ-1308-Is-It-A-Tree-并查集/" itemprop="url">
                  POJ 1308 Is It A Tree? 并查集
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-07-23T23:42:48+08:00" content="2016-07-23">
              2016-07-23
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>Time Limit:1000MS     Memory Limit:10000KB     64bit IO Format:%lld &amp; %llu</p>
</blockquote>
<h1 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h1><p>A tree is a well-known data structure that is either empty (null, void, nothing) or is a set of one or more nodes connected by directed edges between nodes satisfying the following properties. </p>
<p>There is exactly one node, called the root, to which no directed edges point.<br>Every node except the root has exactly one edge pointing to it.<br>There is a unique sequence of directed edges from the root to each node.<br>For example, consider the illustrations below, in which nodes are represented by circles and edges are represented by lines with arrowheads. The first two of these are trees, but the last is not. </p>
<p>In this problem you will be given several descriptions of collections of nodes connected by directed edges. For each of these you are to determine if the collection satisfies the definition of a tree or not.</p>
<h1 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h1><p>The input will consist of a sequence of descriptions (test cases) followed by a pair of negative integers. Each test case will consist of a sequence of edge descriptions followed by a pair of zeroes Each edge description will consist of a pair of integers; the first integer identifies the node from which the edge begins, and the second integer identifies the node to which the edge is directed. Node numbers will always be greater than zero.</p>
<h1 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h1><p>For each test case display the line “Case k is a tree.” or the line “Case k is not a tree.”, where k corresponds to the test case number (they are sequentially numbered starting with 1).</p>
<h1 id="Sample"><a href="#Sample" class="headerlink" title="Sample"></a>Sample</h1><h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><pre><code>6 8  5 3  5 2  6 4
5 6  0 0

8 1  7 3  6 2  8 9  7 5
7 4  7 8  7 6  0 0

3 8  6 8  6 4
5 3  5 6  5 2  0 0
-1 -1
</code></pre><h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><pre><code>Case 1 is a tree.
Case 2 is a tree.
Case 3 is not a tree.
</code></pre><h1 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h1><p>跟HDU 1272 小希的迷宫类似，只不过这次变成了有向图。可是数据太弱。3 8 6 8 0 0这种本来不为树，但是一开始交的代码没有判断居然也能过。判断是否为树的方法其实还要加上，树上每点的入度不能大于1.</p>
<h1 id="AC代码"><a href="#AC代码" class="headerlink" title="AC代码"></a>AC代码</h1><pre><code>#include &lt;iostream&gt;
#include &lt;cstdio&gt;
#include &lt;cstring&gt;
using namespace std;

#define N 100005

int u,v;
int f[N],vis[N],cnt,in[N];
bool flag;

int _find(int x){
    if (f[x]==-1){
        return x;
    }else{
        return f[x]=_find(f[x]);
    }
}

bool _union(int u,int v){
    int x=_find(u);
    int y=_find(v);

    if (x==y){
        return false;
    }else{
        f[y]=x;
        return true;
    }
}

int main(){
    int kase=0;
    memset(in,0,sizeof(in));
    memset(f,-1,sizeof(f));
    memset(vis,0,sizeof(vis));
    cnt=0;
    flag=true;
    while (scanf(&quot;%d%d&quot;,&amp;u,&amp;v)){
        if (u&lt;=-1 &amp;&amp; v&lt;=-1){
            break;
        }else if (u==0 &amp;&amp; v==0){
            for (int i=0;i&lt;N;i++){
                if (vis[i] &amp;&amp; _find(i)==i)
                    cnt++;
            }

            if (flag &amp;&amp; cnt&lt;=1){
                printf(&quot;Case %d is a tree.\n&quot;,++kase);
            }else{
                printf(&quot;Case %d is not a tree.\n&quot;,++kase);
            }
            memset(f,-1,sizeof(f));
            memset(vis,0,sizeof(vis));
            memset(in,0,sizeof(in));
            cnt=0;
            flag=true;
        }else{
            if (vis[u]==0){
                vis[u]=1;
            }
            if (vis[v]==0){
                vis[v]=1;
            }
            in[v]++;
            if (in[v]&gt;1)
                flag=false;

            if (flag){
                flag=_union(u,v);
            }
        }
    }

    return 0;
}
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/23/HDU-1272-小希的迷宫-并查集/" itemprop="url">
                  HDU 1272 小希的迷宫 并查集
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-07-23T23:38:01+08:00" content="2016-07-23">
              2016-07-23
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>Time Limit:1000MS     Memory Limit:32768KB     64bit IO Format:%I64d &amp; %I64u</p>
</blockquote>
<h1 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h1><p>上次Gardon的迷宫城堡小希玩了很久（见Problem B），现在她也想设计一个迷宫让Gardon来走。但是她设计迷宫的思路不一样，首先她认为所有的通道都应该是双向连通的，就是说如果有一个通道连通了房间A和B，那么既可以通过它从房间A走到房间B，也可以通过它从房间B走到房间A，为了提高难度，小希希望任意两个房间有且仅有一条路径可以相通（除非走了回头路）。小希现在把她的设计图给你，让你帮忙判断她的设计图是否符合她的设计思路。比如下面的例子，前两个是符合条件的，但是最后一个却有两种方法从5到达8。 </p>
<h1 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h1><p>输入包含多组数据，每组数据是一个以0 0结尾的整数对列表，表示了一条通道连接的两个房间的编号。房间的编号至少为1，且不超过100000。每两组数据之间有一个空行。<br>整个文件以两个-1结尾。 </p>
<h1 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h1><p>对于输入的每一组数据，输出仅包括一行。如果该迷宫符合小希的思路，那么输出”Yes”，否则输出”No”。 </p>
<h1 id="Sample"><a href="#Sample" class="headerlink" title="Sample"></a>Sample</h1><h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><pre><code>6 8  5 3  5 2  6 4
5 6  0 0

8 1  7 3  6 2  8 9  7 5
7 4  7 8  7 6  0 0

3 8  6 8  6 4
5 3  5 6  5 2  0 0

-1 -1 
</code></pre><h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><pre><code>Yes
Yes
No 
</code></pre><h1 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h1><p>模板题，注意最后判断是否只有一个连通分量。另外，最后生成的数顶点个数可以为0。就在这里卡了很久。</p>
<h1 id="AC代码"><a href="#AC代码" class="headerlink" title="AC代码"></a>AC代码</h1><pre><code>#include &lt;iostream&gt;
#include &lt;cstdio&gt;
#include &lt;cstring&gt;
using namespace std;

#define N 100005

int u,v;
int f[N],vis[N],cnt;
bool flag;

int _find(int x){
    if (f[x]==-1){
        return x;
    }else{
        return f[x]=_find(f[x]);
    }
}

bool _union(int u,int v){
    int x=_find(u);
    int y=_find(v);

    if (x==y){
        return false;
    }else{
        f[x]=y;
        cnt--;
        return true;
    }
}

int main(){
    memset(f,-1,sizeof(f));
    memset(vis,0,sizeof(vis));
    cnt=0;
    flag=true;
    while (scanf(&quot;%d%d&quot;,&amp;u,&amp;v)){
        if (u==-1 &amp;&amp; v==-1){
            break;
        }else if (u==0 &amp;&amp; v==0){
            if (flag &amp;&amp; cnt&lt;=1){
                printf(&quot;Yes\n&quot;);
            }else{
                printf(&quot;No\n&quot;);
            }
            memset(f,-1,sizeof(f));
            memset(vis,0,sizeof(vis));
            cnt=0;
            flag=true;
        }else{
            if (vis[u]==0){
                vis[u]=1;
                cnt++;
            }
            if (vis[v]==0){
                vis[v]=1;
                cnt++;
            }

            if (flag){
                flag=_union(u,v);
            }
        }
    }

    return 0;
}
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/23/ZOJ-3761-Connections-in-Galaxy-War-并查集/" itemprop="url">
                  ZOJ 3761 Connections in Galaxy War 并查集
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-07-23T23:34:18+08:00" content="2016-07-23">
              2016-07-23
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h1><p>In order to strengthen the defense ability, many stars in galaxy allied together and built many bidirectional tunnels to exchange messages. However, when the Galaxy War began, some tunnels were destroyed by the monsters from another dimension. Then many problems were raised when some of the stars wanted to seek help from the others.</p>
<p>In the galaxy, the stars are numbered from 0 to N-1 and their power was marked by a non-negative integer pi. When the star A wanted to seek help, it would send the message to the star with the largest power which was connected with star A directly or indirectly. In addition, this star should be more powerful than the star A. If there were more than one star which had the same largest power, then the one with the smallest serial number was chosen. And therefore, sometimes star A couldn’t find such star for help.</p>
<p>Given the information of the war and the queries about some particular stars, for each query, please find out whether this star could seek another star for help and which star should be chosen.</p>
<h1 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h1><p>There are no more than 20 cases. Process to the end of file.</p>
<p>For each cases, the first line contains an integer N (1 &lt;= N &lt;= 10000), which is the number of stars. The second line contains N integers p0, p1, … , pn-1 (0 &lt;= pi &lt;= 1000000000), representing the power of the i-th star. Then the third line is a single integer M (0 &lt;= M &lt;= 20000), that is the number of tunnels built before the war. Then M lines follows. Each line has two integers a, b (0 &lt;= a, b &lt;= N - 1, a != b), which means star a and star b has a connection tunnel. It’s guaranteed that each connection will only be described once.</p>
<p>In the (M + 2)-th line is an integer Q (0 &lt;= Q &lt;= 50000) which is the number of the information and queries. In the following Q lines, each line will be written in one of next two formats.</p>
<ul>
<li><p>“destroy a b” - the connection between star a and star b was destroyed by the monsters. It’s guaranteed that the connection between star a and star b was available before the monsters’ attack.</p>
</li>
<li><p>“query a” - star a wanted to know which star it should turn to for help</p>
</li>
</ul>
<p>There is a blank line between consecutive cases.</p>
<h1 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h1><p>For each query in the input, if there is no star that star a can turn to for help, then output “-1”; otherwise, output the serial number of the chosen star.</p>
<p>Print a blank line between consecutive cases.</p>
<h1 id="Sample"><a href="#Sample" class="headerlink" title="Sample"></a>Sample</h1><h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><pre><code>2
10 20
1
0 1
5
query 0
query 1
destroy 0 1
query 0
query 1
</code></pre><h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><pre><code>1
-1
-1
-1
</code></pre><h1 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h1><p>因为操作中只包含删除和询问，所以可以先将指令存起来，建立除destroy操作以外的并查集，接着逆向进行操作，得出每次操作的答案，最后再按顺序输出。</p>
<h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><blockquote>
<p>由于ZOJ这几天崩了，所以不能测试代码是否能AC<br>这里就不贴了</p>
</blockquote>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/23/POJ-2912-Rochambeau-并查集/" itemprop="url">
                  POJ 2912 Rochambeau 并查集
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-07-23T23:25:03+08:00" content="2016-07-23">
              2016-07-23
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>Time Limit:5000MS     Memory Limit:65536KB     64bit IO Format:%lld &amp; %llu</p>
</blockquote>
<h1 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h1><p>N children are playing Rochambeau (scissors-rock-cloth) game with you. One of them is the judge. The rest children are divided into three groups (it is possible that some group is empty). You don’t know who is the judge, or how the children are grouped. Then the children start playing Rochambeau game for M rounds. Each round two children are arbitrarily selected to play Rochambeau for one once, and you will be told the outcome while not knowing which gesture the children presented. It is known that the children in the same group would present the same gesture (hence, two children in the same group always get draw when playing) and different groups for different gestures. The judge would present gesture randomly each time, hence no one knows what gesture the judge would present. Can you guess who is the judge after after the game ends? If you can, after how many rounds can you find out the judge at the earliest?</p>
<h1 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h1><p>Input contains multiple test cases. Each test case starts with two integers N and M (1 ≤ N ≤ 500, 0 ≤ M ≤ 2,000) in one line, which are the number of children and the number of rounds. Following are M lines, each line contains two integers in [0, N) separated by one symbol. The two integers are the IDs of the two children selected to play Rochambeau for this round. The symbol may be “=”, “&gt;” or “&lt;”, referring to a draw, that first child wins and that second child wins respectively.</p>
<h1 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h1><p>There is only one line for each test case. If the judge can be found, print the ID of the judge, and the least number of rounds after which the judge can be uniquely determined. If the judge can not be found, or the outcomes of the M rounds of game are inconsistent, print the corresponding message.</p>
<h1 id="Sample"><a href="#Sample" class="headerlink" title="Sample"></a>Sample</h1><h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><pre><code>3 3
0&lt;1
1&lt;2
2&lt;0
3 5
0&lt;1
0&gt;1
1&lt;2
1&gt;2
0&lt;2
4 4
0&lt;1
0&gt;1
2&lt;3
2&gt;3
1 0
</code></pre><h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><pre><code>Can not determine
Player 1 can be determined to be the judge after 4 lines
Impossible
Player 0 can be determined to be the judge after 0 lines
</code></pre><h1 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h1><p>题目意思是一共n个人，分成3组，每组分别只出剪刀石头布。n个人中只有1个裁判，但是裁判可以任意出剪刀石头布。现在给m条提示，每条表示两个人之间的输赢情况。问是否能确定裁判是谁。</p>
<p>因为数据并不大，可以枚举n个人，每次假设i为裁判，则所有包含i的信息直接忽略，其他的信息使用种类并查集分类看是否有冲突，如果有冲突则记录从哪里开始冲突。</p>
<h1 id="AC代码"><a href="#AC代码" class="headerlink" title="AC代码"></a>AC代码</h1><pre><code>#include &lt;iostream&gt;
#include &lt;cstdio&gt;
#include &lt;cstring&gt;
using namespace std;

#define N 505
#define M 2005

struct node{
    int u,v,d;
    node(){}
    node(int uu,int vv,int dd):u(uu),v(vv),d(dd){}
}a[M];

int n,m;
int f[N],r[N];

int _find(int x){
    if (f[x]==-1){
        return x;
    }else{
        int fx=f[x];
        f[x]=_find(f[x]);
        r[x]=(r[x]+r[fx])%3;
        return f[x];
    }
}

bool _union(int u,int v,int d){
    int x=_find(u);
    int y=_find(v);

    if (x==y){
        if (((r[u]-r[v]+3)%3)==d){
            return true;
        }else{
            return false;
        }
    }else{
        f[x]=y;
        r[x]=(-r[u]+r[v]+d+3)%3;
        return true;
    }
}

int main(){
    while (scanf(&quot;%d%d&quot;,&amp;n,&amp;m)!=EOF){
        int u,v,d;
        char c;
        for (int i=0;i&lt;m;i++){
            scanf(&quot;%d%c%d&quot;,&amp;u,&amp;c,&amp;v);
            if (c==&apos;&lt;&apos;){
                d=2;
            }else if (c==&apos;=&apos;){
                d=0;
            }else{
                d=1;
            }
            a[i]=node(u,v,d);
        }

        bool flag;
        int cnt=0;
        int mx=0;
        int num=0;
        for (int i=0;i&lt;n;i++){
            flag=true;
            memset(f,-1,sizeof(f));
            memset(r,0,sizeof(r));
            for (int j=0;j&lt;m;j++){
                u=a[j].u;
                v=a[j].v;
                d=a[j].d;

                if (u==i || v==i)
                    continue;

                flag=_union(u,v,d);
                if (flag==false){
                    mx=max(mx,j+1);
                    break;
                }
            }
            if (flag){
                cnt++;
                num=i;
            }
        }

        if (cnt&gt;1){
            printf(&quot;Can not determine\n&quot;);
        }else if (cnt==0){
            printf(&quot;Impossible\n&quot;);
        }else{
            printf(&quot;Player %d can be determined to be the judge after %d lines\n&quot;,num,mx);
        }
    }

    return 0;
}
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/23/POJ-1984-Navigation-Nightmare-并查集/" itemprop="url">
                  POJ 1984 Navigation Nightmare 并查集
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-07-23T23:08:29+08:00" content="2016-07-23">
              2016-07-23
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>Time Limit:2000MS     Memory Limit:30000KB     64bit IO Format:%lld &amp; %llu</p>
</blockquote>
<h1 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h1><p>Farmer John’s pastoral neighborhood has N farms (2 &lt;= N &lt;= 40,000), usually numbered/labeled 1..N. A series of M (1 &lt;= M &lt; 40,000) vertical and horizontal roads each of varying lengths (1 &lt;= length &lt;= 1000) connect the farms. A map of these farms might look something like the illustration below in which farms are labeled F1..F7 for clarity and lengths between connected farms are shown as (n):</p>
<pre><code> F1 --- (13) ---- F6 --- (9) ----- F3

 |                                 |

(3)                                |

 |                                (7)

F4 --- (20) -------- F2            |

 |                                 |

(2)                               F5

 | 

F7 
</code></pre><p>Being an ASCII diagram, it is not precisely to scale, of course.</p>
<p>Each farm can connect directly to at most four other farms via roads that lead exactly north, south, east, and/or west. Moreover, farms are only located at the endpoints of roads, and some farm can be found at every endpoint of every road. No two roads cross, and precisely one path (sequence of roads) links every pair of farms.</p>
<p>FJ lost his paper copy of the farm map and he wants to reconstruct it from backup information on his computer. This data contains lines like the following, one for every road:</p>
<p>There is a road of length 10 running north from Farm #23 to Farm #17<br>There is a road of length 7 running east from Farm #1 to Farm #17<br>…</p>
<p>As FJ is retrieving this data, he is occasionally interrupted by questions such as the following that he receives from his navigationally-challenged neighbor, farmer Bob:</p>
<p>What is the Manhattan distance between farms #1 and #23?</p>
<p>FJ answers Bob, when he can (sometimes he doesn’t yet have enough data yet). In the example above, the answer would be 17, since Bob wants to know the “Manhattan” distance between the pair of farms.<br>The Manhattan distance between two points (x1,y1) and (x2,y2) is just |x1-x2| + |y1-y2| (which is the distance a taxicab in a large city must travel over city streets in a perfect grid to connect two x,y points).</p>
<p>When Bob asks about a particular pair of farms, FJ might not yet have enough information to deduce the distance between them; in this case, FJ apologizes profusely and replies with “-1”.</p>
<h1 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h1><ul>
<li>Line 1: Two space-separated integers: N and M</li>
<li>Lines 2..M+1: Each line contains four space-separated entities, F1, F2, L, and D that describe a road. F1 and F2 are numbers of two farms connected by a road, L is its length, and D is a character that is either ‘N’, ‘E’, ‘S’, or ‘W’ giving the direction of the road from F1 to F2.</li>
<li>Line M+2: A single integer, K (1 &lt;= K &lt;= 10,000), the number of FB’s queries</li>
<li>Lines M+3..M+K+2: Each line corresponds to a query from Farmer Bob and contains three space-separated integers: F1, F2, and I. F1 and F2 are numbers of the two farms in the query and I is the index (1 &lt;= I &lt;= M) in the data after which Bob asks the query. Data index 1 is on line 2 of the input data, and so on.</li>
</ul>
<h1 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h1><ul>
<li>Lines 1..K: One integer per line, the response to each of Bob’s queries.  Each line should contain either a distance measurement or -1, if it is impossible to determine the appropriate distance.</li>
</ul>
<h1 id="Sample"><a href="#Sample" class="headerlink" title="Sample"></a>Sample</h1><h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><pre><code>7 6
1 6 13 E
6 3 9 E
3 5 7 S
4 1 3 N
2 4 20 W
4 7 2 S
3
1 6 1
1 4 3
2 6 6
</code></pre><h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><pre><code>13
-1
10
</code></pre><h1 id="Hint"><a href="#Hint" class="headerlink" title="Hint"></a>Hint</h1><p>At time 1, FJ knows the distance between 1 and 6 is 13.<br>At time 3, the distance between 1 and 4 is still unknown.<br>At the end, location 6 is 3 units west and 7 north of 2, so the distance is 10.</p>
<h1 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h1><p>并查集，将每个地点的坐标代替普通的并查集中的点，r[x]表示点x与点f[x]的相对位置，那么只要两个地点属于同一集合，就可以通过r[x]算出他们之间的相对关系。</p>
<h1 id="AC代码"><a href="#AC代码" class="headerlink" title="AC代码"></a>AC代码</h1><pre><code>#include &lt;map&gt;
#include &lt;cstring&gt;
#include &lt;iostream&gt;
#include &lt;cstdio&gt;
#include &lt;algorithm&gt;
#include &lt;vector&gt;
using namespace std;

#define N 40005
#define K 10005
#define PB push_back

char dir[]=&quot;NESW&quot;;
int vx[]={-1,0,1,0};
int vy[]={0,1,0,-1};

struct order{
    int u,v,l,d;
}a[N];

struct query{
    int u,v,q,id,ans;
}b[K];

struct node{
    int x,y;
    node(){}
    node(int xx,int yy):x(xx),y(yy){}
}r[N];

int n,m,k;
int f[N];

bool cmp(query a,query b){
    return a.q&lt;b.q;
}

bool cmp2(query a,query b){
    return a.id&lt;b.id;
}

int _find(int x){
    if (f[x]==-1){
        return x;
    }else{
        int fx=f[x];
        f[x]=_find(f[x]);
        r[x].x+=r[fx].x;
        r[x].y+=r[fx].y;
    }
    return f[x];
}

void _union(int i){
    int u,v,l,d;
    u=a[i].u;
    v=a[i].v;
    l=a[i].l;
    d=a[i].d;

    int x=_find(u);
    int y=_find(v);
    int tx=l*vx[d];
    int ty=l*vy[d];

    if (x!=y){
        f[x]=y;
        r[x].x=tx+r[v].x-r[u].x;
        r[x].y=ty+r[v].y-r[u].y;
    }
}

int main(){
    while (scanf(&quot;%d%d&quot;,&amp;n,&amp;m)!=EOF){
        memset(f,-1,sizeof(f));
        for (int i=0;i&lt;=n;i++){
            r[i].x=r[i].y=0;
        }
        for (int i=0;i&lt;m;i++){
            char c;
            scanf(&quot;%d%d%d %c&quot;,&amp;a[i].u,&amp;a[i].v,&amp;a[i].l,&amp;c);
            for (int j=0;j&lt;4;j++){
                if (c==dir[j]){
                    a[i].d=j;
                    break;
                }
            }
        }

        scanf(&quot;%d&quot;,&amp;k);
        for (int i=0;i&lt;k;i++){
            scanf(&quot;%d%d%d&quot;,&amp;b[i].u,&amp;b[i].v,&amp;b[i].q);
            b[i].id=i;
        }

        sort(b,b+k,cmp);

        int cnt=0;
        for (int i=0;i&lt;k;i++){
            for (int j=cnt;j&lt;b[i].q;j++){
                _union(j);
            }
            cnt=b[i].q;

            int u=b[i].u;
            int v=b[i].v;
            int x=_find(u);
            int y=_find(v);
            if (x!=y){
                b[i].ans=-1;
            }else{
                b[i].ans=abs(r[u].x-r[v].x)+abs(r[u].y-r[v].y);
            }
        }

        sort(b,b+k,cmp2);

        for (int i=0;i&lt;k;i++){
            printf(&quot;%d\n&quot;,b[i].ans);
        }
    }

    return 0;
}
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/22/POJ-2492-A-Bug-s-Life-并查集/" itemprop="url">
                  POJ 2492 A Bug's Life 并查集
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-07-22T10:40:57+08:00" content="2016-07-22">
              2016-07-22
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>Time Limit:10000MS     Memory Limit:65536KB     64bit IO Format:%lld &amp; %llu</p>
</blockquote>
<h1 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h1><h2 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h2><p>Professor Hopper is researching the sexual behavior of a rare species of bugs. He assumes that they feature two different genders and that they only interact with bugs of the opposite gender. In his experiment, individual bugs and their interactions were easy to identify, because numbers were printed on their backs. </p>
<h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>Given a list of bug interactions, decide whether the experiment supports his assumption of two genders with no homosexual bugs or if it contains some bug interactions that falsify it.</p>
<h1 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h1><p>The first line of the input contains the number of scenarios. Each scenario starts with one line giving the number of bugs (at least one, and up to 2000) and the number of interactions (up to 1000000) separated by a single space. In the following lines, each interaction is given in the form of two distinct bug numbers separated by a single space. Bugs are numbered consecutively starting from one.</p>
<h1 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h1><p>The output for every scenario is a line containing “Scenario #i:”, where i is the number of the scenario starting at 1, followed by one line saying either “No suspicious bugs found!” if the experiment is consistent with his assumption about the bugs’ sexual behavior, or “Suspicious bugs found!” if Professor Hopper’s assumption is definitely wrong.</p>
<h1 id="Sample"><a href="#Sample" class="headerlink" title="Sample"></a>Sample</h1><h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><pre><code>2
3 3
1 2
2 3
1 3
4 2
1 2
3 4
</code></pre><h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><pre><code>Scenario #1:
Suspicious bugs found!

Scenario #2:
No suspicious bugs found!
</code></pre><h1 id="Hint"><a href="#Hint" class="headerlink" title="Hint"></a>Hint</h1><p>Huge input,scanf is recommended.</p>
<h1 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h1><p>并查集数组f[x]判断bug是否是同在同一集合，r[x]表示x与f[x]的关系，那么x,y在同一集合的情况下x,y之间的关系可以用r[x]^r[y]表示。</p>
<h1 id="AC代码"><a href="#AC代码" class="headerlink" title="AC代码"></a>AC代码</h1><pre><code>#include &lt;iostream&gt;
#include &lt;cstdio&gt;
#include &lt;cstring&gt;
using namespace std;

#define N 2005
#define PB push_back

int n,m;
int f[N],r[N];

int _find(int x){
    if (f[x]==-1){
        return x;
    }else{
        int fx=f[x];
        f[x]=_find(f[x]);
        r[x]=r[x]^r[fx];
    }
    return f[x];
}

bool _union(int u,int v){
    int x=_find(u);
    int y=_find(v);

    if (x==y){
        if ((r[u]^r[v])==1)
            return false;
        else
            return true;
    }else{
        f[x]=y;
        r[x]=r[u]^r[v]^1;
        return false;
    }
}

int main(){
    int T,kase=0;
    scanf(&quot;%d&quot;,&amp;T);
    while (T--){
        bool flag=false;
        memset(f,-1,sizeof(f));
        memset(r,0,sizeof(r));
        scanf(&quot;%d%d&quot;,&amp;n,&amp;m);
        for (int i=0;i&lt;m;i++){
            int u,v;
            scanf(&quot;%d%d&quot;,&amp;u,&amp;v);
            if (!flag){
                flag=_union(u,v);
            }
        }
        printf(&quot;Scenario #%d:\n&quot;,++kase);
        if (flag){
            printf(&quot;Suspicious bugs found!\n\n&quot;);
        }else{
            printf(&quot;No suspicious bugs found!\n\n&quot;);
        }
    }

    return 0;
}
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/20/POJ-1733-Parity-game-并查集/" itemprop="url">
                  POJ 1733 Parity game 并查集
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-07-20T11:53:15+08:00" content="2016-07-20">
              2016-07-20
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>Time Limit:1000MS     Memory Limit:65536KB     64bit IO Format:%lld &amp; %llu</p>
</blockquote>
<h1 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h1><p>Now and then you play the following game with your friend. Your friend writes down a sequence consisting of zeroes and ones. You choose a continuous subsequence (for example the subsequence from the third to the fifth digit inclusively) and ask him, whether this subsequence contains even or odd number of ones. Your friend answers your question and you can ask him about another subsequence and so on. Your task is to guess the entire sequence of numbers. </p>
<p>You suspect some of your friend’s answers may not be correct and you want to convict him of falsehood. Thus you have decided to write a program to help you in this matter. The program will receive a series of your questions together with the answers you have received from your friend. The aim of this program is to find the first answer which is provably wrong, i.e. that there exists a sequence satisfying answers to all the previous questions, but no such sequence satisfies this answer.</p>
<h1 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h1><p>The first line of input contains one number, which is the length of the sequence of zeroes and ones. This length is less or equal to 1000000000. In the second line, there is one positive integer which is the number of questions asked and answers to them. The number of questions and answers is less or equal to 5000. The remaining lines specify questions and answers. Each line contains one question and the answer to this question: two integers (the position of the first and last digit in the chosen subsequence) and one word which is either <strong>even</strong> or <strong>odd</strong> (the answer, i.e. the parity of the number of ones in the chosen subsequence, where <strong>even</strong> means an even number of ones and <strong>odd</strong> means an odd number).</p>
<h1 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h1><p>There is only one line in output containing one integer X. Number X says that there exists a sequence of zeroes and ones satisfying first X parity conditions, but there exists none satisfying X+1 conditions. If there exists a sequence of zeroes and ones satisfying all the given conditions, then number X should be the number of all the questions asked.</p>
<h1 id="Sample"><a href="#Sample" class="headerlink" title="Sample"></a>Sample</h1><h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><pre><code>10
5
1 2 even
3 4 odd
5 6 even
1 6 even
7 10 odd
</code></pre><h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><pre><code>3
</code></pre><h1 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h1><p>使用种类并查集，r[x]表示(x,r[x]]区间的奇偶情况。<br>对于每次询问p q d,如果p、q同一组，则通过判断r[p]^r[q]与d是否相等判断是否正确。如果不同组，则合并。</p>
<h1 id="AC代码"><a href="#AC代码" class="headerlink" title="AC代码"></a>AC代码</h1><pre><code>#include &lt;iostream&gt;
#include &lt;cstdio&gt;
#include &lt;algorithm&gt;
#include &lt;vector&gt;
#include &lt;cstring&gt;
#include &lt;map&gt;
using namespace std;

#define N 20005

struct code{
    int x,y,d;
}a[N];

int l,n;
int cnt;
map&lt;int,int&gt; m;
int b[N],f[N],r[N];

int _find(int x){
    if (f[x]==x){
        return x;
    }else{
        int fx=f[x];
        f[x]=_find(f[x]);
        r[x]=r[x]^r[fx];
        return f[x];
    }
}

int main(){
    while (~scanf(&quot;%d%d&quot;,&amp;l,&amp;n)){
        cnt=0;
        m.clear();
        for (int i=0;i&lt;n;i++){
            char st[5];
            scanf(&quot;%d%d%s&quot;,&amp;a[i].x,&amp;a[i].y,st);
            if (st[0]==&apos;e&apos;)
                a[i].d=0;
            else
                a[i].d=1;

            a[i].x--;

            if (m[a[i].x]==0){
                m[a[i].x]=1;
                b[cnt++]=a[i].x;
            }
            if (m[a[i].y]==0){
                m[a[i].y]=1;
                b[cnt++]=a[i].y;
            }
        }

        sort(b,b+cnt);
        for (int i=0;i&lt;cnt;i++){
            m[b[i]]=i;
            f[i]=i;
            r[i]=0;
        }

        int ans=0;
        for (int i=0;i&lt;n;i++){
            int p,q,d;
            p=m[a[i].x];
            q=m[a[i].y];
            d=a[i].d;

            int x=_find(p);
            int y=_find(q);
            if (x&gt;y){
                swap(x,y);
            }
            if (x==y){
                if (d==(r[p]^r[q]))
                    ans++;
                else{
                    break;
                }
            }else{
                f[x]=y;
                r[x]=r[p]^d^r[q];
                ans++;
            }
        }
        printf(&quot;%d\n&quot;,ans);
    }


    return 0;
}
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/20/POJ-1456-Supermarket-并查集/" itemprop="url">
                  POJ 1456 Supermarket 并查集
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-07-20T11:52:54+08:00" content="2016-07-20">
              2016-07-20
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>Time Limit:2000MS     Memory Limit:65536KB     64bit IO Format:%lld &amp; %llu</p>
</blockquote>
<h1 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h1><p>A supermarket has a set Prod of products on sale. It earns a profit px for each product x∈Prod sold by a deadline dx that is measured as an integral number of time units starting from the moment the sale begins. Each product takes precisely one unit of time for being sold. A selling schedule is an ordered subset of products Sell ≤ Prod such that the selling of each product x∈Sell, according to the ordering of Sell, completes before the deadline dx or just when dx expires. The profit of the selling schedule is Profit(Sell)=Σ x∈Sellpx. An optimal selling schedule is a schedule with a maximum profit.<br>For example, consider the products Prod={a,b,c,d} with (pa,da)=(50,2), (pb,db)=(10,1), (pc,dc)=(20,2), and (pd,dd)=(30,1). The possible selling schedules are listed in table 1. For instance, the schedule Sell={d,a} shows that the selling of product d starts at time 0 and ends at time 1, while the selling of product a starts at time 1 and ends at time 2. Each of these products is sold by its deadline. Sell is the optimal schedule and its profit is 80. </p>
<p>Write a program that reads sets of products from an input text file and computes the profit of an optimal selling schedule for each set of products. </p>
<h1 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h1><p>A set of products starts with an integer 0 &lt;= n &lt;= 10000, which is the number of products in the set, and continues with n pairs pi di of integers, 1 &lt;= pi &lt;= 10000 and 1 &lt;= di &lt;= 10000, that designate the profit and the selling deadline of the i-th product. White spaces can occur freely in input. Input data terminate with an end of file and are guaranteed correct.</p>
<h1 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h1><p>For each set of products, the program prints on the standard output the profit of an optimal selling schedule for the set. Each result is printed from the beginning of a separate line.</p>
<h1 id="Sample"><a href="#Sample" class="headerlink" title="Sample"></a>Sample</h1><h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><pre><code>4  50 2  10 1   20 2   30 1

7  20 1   2 1   10 3  100 2   8 2
   5 20  50 10
</code></pre><h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><pre><code>80
185
</code></pre><h1 id="Hint"><a href="#Hint" class="headerlink" title="Hint"></a>Hint</h1><p>The sample input contains two product sets. The first set encodes the products from table 1. The second set is for 7 products. The profit of an optimal schedule for these products is 185.</p>
<h1 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h1><p>将物品按照价格从高到低排序，接着价格从高到低，为每个物品找到一个在截止日期前的最晚销售时间，这可以通过顺序查找找到，更快的方法是使用并查集，f[x]记录本来在x时间销售的物品的最晚销售时间，一旦有物品在x日子销售，则f[x]=x-1。</p>
<h1 id="AC代码"><a href="#AC代码" class="headerlink" title="AC代码"></a>AC代码</h1><pre><code>#include &lt;iostream&gt;
#include &lt;cstdio&gt;
#include &lt;vector&gt;
#include &lt;cstring&gt;
#include &lt;algorithm&gt;
using namespace std;

#define N 10005
#define PB push_back

int n;
struct node{
    node(){}
    node(int pp,int dd):p(pp),d(dd){}
    int p,d;
}a[N];
int f[N];

int _find(int x){
    if (f[x]==-1)
        return x;
    else
        return f[x]=_find(f[x]);
}

bool cmp(node a,node b){
    return a.p&gt;b.p;
}

int main(){
    while (~scanf(&quot;%d&quot;,&amp;n)){
        memset(f,-1,sizeof(f));
        for (int i=1;i&lt;=n;i++){
            scanf(&quot;%d%d&quot;,&amp;a[i].p,&amp;a[i].d);
        }
        sort(a+1,a+n+1,cmp);

        int ans=0;
        for (int i=1;i&lt;=n;i++){
            int x=_find(a[i].d);
            if (x&gt;0){
                ans+=a[i].p;
                f[x]=x-1;
            }
        }
        printf(&quot;%d\n&quot;,ans);
    }

    return 0;
}
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/19/Mac启用自带FTP服务/" itemprop="url">
                  Mac启用自带FTP服务
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-07-19T11:07:48+08:00" content="2016-07-19">
              2016-07-19
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>转自：<a href="http://blog.sina.com.cn/s/blog_4fa20e8c0102vd4q.html" target="_blank" rel="external">http://blog.sina.com.cn/s/blog_4fa20e8c0102vd4q.html</a></p>
</blockquote>
<p>系统自带的的FTP<br>通过命令行来开启关闭，如下所示： </p>
<p>开启 FTP Server </p>
<pre><code>sudo -s launchctl load -w /System/Library/LaunchDaemons/ftp.plist 
</code></pre><p>关闭 FTP Server </p>
<pre><code>sudo -s launchctl unload -w /System/Library/LaunchDaemons/ftp.plist 
</code></pre><p>登录格式为 ftp://用户名@ip<br>然后输入你在Mac上的用户名和密码就可以了</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/18/POJ-1417-True-Liars-并查集/" itemprop="url">
                  POJ 1417 True Liars 并查集
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-07-18T19:02:59+08:00" content="2016-07-18">
              2016-07-18
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>Time Limit:1000MS Memory Limit:10000KB 64bit IO Format:%I64d &amp; %I64u</p>
</blockquote>
<h1 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h1><p>After having drifted about in a small boat for a couple of days, Akira Crusoe Maeda was finally cast ashore on a foggy island. Though he was exhausted and despaired, he was still fortunate to remember a legend of the foggy island, which he had heard from patriarchs in his childhood. This must be the island in the legend. In the legend, two tribes have inhabited the island, one is divine and the other is devilish, once members of the divine tribe bless you, your future is bright and promising, and your soul will eventually go to Heaven, in contrast, once members of the devilish tribe curse you, your future is bleak and hopeless, and your soul will eventually fall down to Hell. </p>
<p>In order to prevent the worst-case scenario, Akira should distinguish the devilish from the divine. But how? They looked exactly alike and he could not distinguish one from the other solely by their appearances. He still had his last hope, however. The members of the divine tribe are truth-tellers, that is, they always tell the truth and those of the devilish tribe are liars, that is, they always tell a lie. </p>
<p>He asked some of them whether or not some are divine. They knew one another very much and always responded to him “faithfully” according to their individual natures (i.e., they always tell the truth or always a lie). He did not dare to ask any other forms of questions, since the legend says that a devilish member would curse a person forever when he did not like the question. He had another piece of useful informationf the legend tells the populations of both tribes. These numbers in the legend are trustworthy since everyone living on this island is immortal and none have ever been born at least these millennia. </p>
<p>You are a good computer programmer and so requested to help Akira by writing a program that classifies the inhabitants according to their answers to his inquiries. </p>
<h1 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h1><p>The input consists of multiple data sets, each in the following format : </p>
<pre><code>n p1 p2 
xl yl a1 
x2 y2 a2 
... 
xi yi ai
... 
xn yn an 
</code></pre><p>The first line has three non-negative integers n, p1, and p2. n is the number of questions Akira asked. pl and p2 are the populations of the divine and devilish tribes, respectively, in the legend. Each of the following n lines has two integers xi, yi and one word ai. xi and yi are the identification numbers of inhabitants, each of which is between 1 and p1 + p2, inclusive. ai is either yes, if the inhabitant xi said that the inhabitant yi was a member of the divine tribe, or no, otherwise. Note that xi and yi can be the same number since “are you a member of the divine tribe?” is a valid question. Note also that two lines may have the same x’s and y’s since Akira was very upset and might have asked the same question to the same one more than once. </p>
<p>You may assume that n is less than 1000 and that p1 and p2 are less than 300. A line with three zeros, i.e., 0 0 0, represents the end of the input. You can assume that each data set is consistent and no contradictory answers are included. </p>
<h1 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h1><p>For each data set, if it includes sufficient information to classify all the inhabitants, print the identification numbers of all the divine ones in ascending order, one in a line. In addition, following the output numbers, print end in a line. Otherwise, i.e., if a given data set does not include sufficient information to identify all the divine members, print no in a line.</p>
<h1 id="Sample"><a href="#Sample" class="headerlink" title="Sample"></a>Sample</h1><h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><pre><code>2 1 1
1 2 no
2 1 no
3 2 1
1 1 yes
2 2 yes
3 3 yes
2 2 1
1 2 yes
2 3 no
5 4 3
1 2 yes
1 3 no
4 5 yes
5 6 yes
6 7 no
0 0 0
</code></pre><h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><pre><code>no
no
1
2
end
3
4
5
6
end
</code></pre><h1 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h1><p>当A认为B为yes，如果A为好人，则B也为好人；如果A为坏人，则B也是坏人，因为A说谎。同理，当A认为B为no，如果A为坏人，则B为好人；当A为好人，则B为坏人。说明yes的情况下，A、B为同一类人；在no的情况下，A、B为不同类人，使用带权并查集将所有人分成若干集合，每个集合里又分成两个子集，但是两个子集不知道是好人还是坏人。最后通过分组背包得出是否能够刚好分出p1个好人，其中ans[i][j]表示前i组中j个好人的分组可能组合数，当ans[组数][p1]=1时才有唯一方案。</p>
<h1 id="未AC代码"><a href="#未AC代码" class="headerlink" title="未AC代码"></a>未AC代码</h1><pre><code>#include &lt;iostream&gt;
#include &lt;cstdio&gt;
#include &lt;vector&gt;
#include &lt;cstring&gt;
#include &lt;algorithm&gt;
using namespace std;

#define N 605
#define PB push_back

int n,p1,p2,nn;
int f[N],r[N];
int ans[N][N];

int _find(int x){
    if (f[x]==x)
        return x;
    int t=f[x];
    f[x]=_find(f[x]);
    r[x]=(r[x]+r[t])%2;
    return f[x];
}

int main(){
    while (~scanf(&quot;%d%d%d&quot;,&amp;n,&amp;p1,&amp;p2)){
        vector&lt;int&gt; cnt[N][2];
        nn=p1+p2;
        for (int i=1;i&lt;=nn;i++){
            f[i]=i;
            r[i]=0;
        }
        if (!(n || p1 || p2))
            break;

        for (int i=0;i&lt;n;i++){
            int a,b;
            char st[10];
            scanf(&quot;%d%d%s&quot;,&amp;a,&amp;b,st);

            int flag;
            flag=(st[0]==&apos;y&apos;?0:1);

            int x=_find(a);
            int y=_find(b);
            if (x&gt;y)
                swap(x,y);
            if (x!=y){
                f[x]=y;
                r[x]=(r[a]+r[b]+flag)%2;
            }
        }


        for (int i=1;i&lt;=nn;i++){
            int x=_find(i);
            cnt[x][r[i]].PB(i);
        }

        vector&lt;int&gt; grp;
        for (int i=1;i&lt;=nn;i++){
            if (cnt[i][0].size()&gt;0 || cnt[i][1].size()&gt;0){
                grp.PB(i);
            }
        }

        memset(ans,0,sizeof(ans));
        ans[0][0]=1;
        for (int i=1;i&lt;=grp.size();i++){
            for (int v=p1;v&gt;=0;v--){
                ans[i][v]=ans[i-1][v];
                for (int j=0;j&lt;2;j++){
                    if (cnt[grp[i-1]][j].size()&gt;0 &amp;&amp; cnt[grp[i-1]][j].size()&lt;=v){
                        ans[i][v]+=ans[i-1][v-cnt[grp[i-1]][j].size()];
                    }
                }
            }
        }

        vector&lt;int&gt; num;
        if (ans[grp.size()][p1]==1){
            int v=p1;
            for (int i=grp.size();i&gt;0;i--){
                for (int j=0;j&lt;2;j++){
                    if (cnt[grp[i-1]][j].size()&gt;0 &amp;&amp; cnt[grp[i-1]][j].size()&lt;=v &amp;&amp; ans[i-1][v-cnt[grp[i-1]][j].size()]==1){
                        for (int k=0;k&lt;cnt[grp[i-1]][j].size();k++){
                            num.PB(cnt[grp[i-1]][j][k]);
                        }
                        v-=cnt[grp[i-1]][j].size();
                        break;
                    }
                }
            }
            sort(num.begin(),num.end());
            for (int i=0;i&lt;num.size();i++){
                printf(&quot;%d\n&quot;,num[i]);
            }
            printf(&quot;end\n&quot;);
        }else{
            printf(&quot;no\n&quot;);
        }
    }

    return 0;
}
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.jpg"
               alt="Jacky Yip" />
          <p class="site-author-name" itemprop="name">Jacky Yip</p>
          <p class="site-description motion-element" itemprop="description">Jacky Yip's Blog</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">20</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">14</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jacky Yip</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.1"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  




  
  
  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
       search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body").append('<div class="popoverlay">').css('overflow', 'hidden');
      $('.popup').toggle();

    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
    'use strict';
    $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
            // get the contents from search data
            isfetched = true;
            $('.popup').detach().appendTo('.header-inner');
            var datas = $( "entry", xmlResponse ).map(function() {
                return {
                    title: $( "title", this ).text(),
                    content: $("content",this).text(),
                    url: $( "url" , this).text()
                };
            }).get();
            var $input = document.getElementById(search_id);
            var $resultContent = document.getElementById(content_id);
            $input.addEventListener('input', function(){
                var matchcounts = 0;
                var str='<ul class=\"search-result-list\">';                
                var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                $resultContent.innerHTML = "";
                if (this.value.trim().length > 1) {
                // perform local searching
                datas.forEach(function(data) {
                    var isMatch = true;
                    var content_index = [];
                    var data_title = data.title.trim().toLowerCase();
                    var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                    var data_url = data.url;
                    var index_title = -1;
                    var index_content = -1;
                    var first_occur = -1;
                    // only match artiles with not empty titles and contents
                    if(data_title != '' && data_content != '') {
                        keywords.forEach(function(keyword, i) {
                            index_title = data_title.indexOf(keyword);
                            index_content = data_content.indexOf(keyword);
                            if( index_title < 0 && index_content < 0 ){
                                isMatch = false;
                            } else {
                                if (index_content < 0) {
                                    index_content = 0;
                                }
                                if (i == 0) {
                                    first_occur = index_content;
                                }
                            }
                        });
                    }
                    // show search results
                    if (isMatch) {
                        matchcounts += 1;
                        str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                        var content = data.content.trim().replace(/<[^>]+>/g,"");
                        if (first_occur >= 0) {
                            // cut out 100 characters
                            var start = first_occur - 20;
                            var end = first_occur + 80;
                            if(start < 0){
                                start = 0;
                            }
                            if(start == 0){
                                end = 50;
                            }
                            if(end > content.length){
                                end = content.length;
                            }
                            var match_content = content.substring(start, end);
                            // highlight all keywords
                            keywords.forEach(function(keyword){
                                var regS = new RegExp(keyword, "gi");
                                match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                            });
                            
                            str += "<p class=\"search-result\">" + match_content +"...</p>"
                        }
                        str += "</li>";
                    }
                })};
                str += "</ul>";
                if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
                if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
                $resultContent.innerHTML = str;
            });
            proceedsearch();
        }
    });}

    // handle and trigger popup window;
    $('.popup-trigger').mousedown(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };

    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".popoverlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>

  

  

  

</body>
</html>
